(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{41:function(t,e,n){},42:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(1),c=n(16),o=n.n(c),u=n(2),s=n.n(u),i=n(4),l=n(5),p=function(t){return Object(a.jsx)("button",{onClick:t.handleClick,children:t.text})},d=function(t){var e=t.newName,n=t.handleNameChange,r=t.newNumber,c=t.handleNumberChange,o=t.addPerson;return Object(a.jsxs)("form",{children:[Object(a.jsxs)("div",{children:["Name: ",Object(a.jsx)("input",{type:"text",value:e,onChange:n}),"Number: ",Object(a.jsx)("input",{type:"text",value:r,onChange:c})]}),Object(a.jsx)("div",{children:Object(a.jsx)(p,{text:"Add",handleClick:o})})]})},h=function(t){var e=t.filteredContacts,n=t.deleteContact;return e.map((function(t){return Object(a.jsxs)("p",{children:[t.name," ",t.number," ",Object(a.jsx)(p,{text:"Delete",handleClick:function(){return n(t.name,t.id)}})," "]},t.id)}))},f=function(t){var e=t.query,n=t.handleSearchChange;return Object(a.jsxs)("div",{children:["Filter shown with: ",Object(a.jsx)("input",{type:"text",value:e,onChange:n})]})},b=function(t){var e=t.message;return null===e?null:Object(a.jsx)("div",{className:e.type,children:e.text})},j=n(6),x=n.n(j),v="/api/persons";function O(){return(O=Object(i.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.get(v);case 3:return e=t.sent,t.abrupt("return",e.data);case 7:t.prev=7,t.t0=t.catch(0),console.log("Failed to get all contacts. Error: ".concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function m(){return(m=Object(i.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.post(v,e);case 3:return n=t.sent,t.abrupt("return",n.data);case 7:t.prev=7,t.t0=t.catch(0),console.log("Failed to create contact. Error: ".concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function w(){return(w=Object(i.a)(s.a.mark((function t(e,n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.put("".concat(v,"/").concat(e),n);case 3:return a=t.sent,t.abrupt("return",a.data);case 7:t.prev=7,t.t0=t.catch(0),console.log("Failed to update contact. Error: ".concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function y(){return(y=Object(i.a)(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.delete("".concat(v,"/").concat(e));case 3:return n=t.sent,t.abrupt("return",n.data);case 7:t.prev=7,t.t0=t.catch(0),console.log("Failed to delete contact. Error: ".concat(t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var g={getAll:function(){return O.apply(this,arguments)},create:function(t){return m.apply(this,arguments)},update:function(t,e){return w.apply(this,arguments)},deleteContact:function(t){return y.apply(this,arguments)}},k=(n(41),function(){var t=Object(r.useState)([]),e=Object(l.a)(t,2),n=e[0],c=e[1],o=Object(r.useState)(n),u=Object(l.a)(o,2),p=u[0],j=u[1],x=Object(r.useState)(""),v=Object(l.a)(x,2),O=v[0],m=v[1],w=Object(r.useState)(""),y=Object(l.a)(w,2),k=y[0],C=y[1],N=Object(r.useState)(""),E=Object(l.a)(N,2),S=E[0],F=E[1],A=Object(r.useState)(null),D=Object(l.a)(A,2),P=D[0],q=D[1];function J(){return(J=Object(i.a)(s.a.mark((function t(e){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.preventDefault(),a={name:O,number:k},-1===(r=B(O))){t.next=15;break}if(!window.confirm("".concat(O," is already added to phonebook, replace the old number with a new one?"))){t.next=13;break}return t.t0=c,t.t1=n,t.next=10,g.update(n[r].id,a);case 10:t.t2=t.sent,t.t3=t.t1.concat.call(t.t1,t.t2),(0,t.t0)(t.t3);case 13:t.next=22;break;case 15:return t.t4=c,t.t5=n,t.next=19,g.create(a);case 19:t.t6=t.sent,t.t7=t.t5.concat.call(t.t5,t.t6),(0,t.t4)(t.t7);case 22:m(""),C(""),q({text:"Added ".concat(O),type:"notification"}),t.next=30;break;case 27:t.prev=27,t.t8=t.catch(0),q({text:'Failed to add "'.concat(O,'" as a contact.'),type:"error"});case 30:case"end":return t.stop()}}),t,null,[[0,27]])})))).apply(this,arguments)}function L(){return(L=Object(i.a)(s.a.mark((function t(e,a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!window.confirm("Delete ".concat(e,"?"))){t.next=10;break}return t.t0=c,t.t1=n,t.next=6,g.deleteContact(a);case 6:t.t2=t.sent,t.t3=t.t1.concat.call(t.t1,t.t2),(0,t.t0)(t.t3),q({text:"Deleted ".concat(e),type:"notification"});case 10:t.next=15;break;case 12:t.prev=12,t.t4=t.catch(0),q({text:'Contact: "'.concat(e,'" was already removed from server'),type:"error"});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}Object(r.useEffect)((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.getAll();case 3:e=t.sent,c(e),j(e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Failed to fetch contacts. Error: ".concat(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n.length]),Object(r.useEffect)((function(){setTimeout((function(){q(null)}),5e3)}),[null!==P]);var B=function(t){return n.map((function(t){return t.name})).indexOf(t)};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Phonebook"}),Object(a.jsx)(b,{message:P}),Object(a.jsx)(f,{query:S,handleSearchChange:function(t){var e=t.target.value;F(e);var a=e.length?n.filter((function(t){return t.name.toLowerCase().includes(S.toLowerCase())})):n;j(a)}}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Add New Contact"}),Object(a.jsx)(d,{newName:O,handleNameChange:function(t){m(t.target.value)},newNumber:k,handleNumberChange:function(t){C(t.target.value)},addPerson:function(t){return J.apply(this,arguments)}})]}),Object(a.jsx)("h3",{children:"Numbers"}),Object(a.jsx)(h,{filteredContacts:p,deleteContact:function(t,e){return L.apply(this,arguments)}})]})});o.a.render(Object(a.jsx)(k,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.d6c4dcfe.chunk.js.map